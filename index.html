<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
              crossorigin="anonymous">
        <title>Home</title>
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"
                integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
                crossorigin="anonymous"></script>
        <script>
            $(document).ready(function () {
                // Obtener referencia al input y a la imagen

                const $seleccionArchivos = document.querySelector("#subirPersonaje")
                let contador = 0;

                // Escuchar cuando cambie
                $seleccionArchivos.addEventListener("change", () => {
                    // Los archivos seleccionados, pueden ser muchos o uno

                    const archivos = $seleccionArchivos.files;
                    // Si no hay archivos salimos de la función y quitamos la imagen
                    //if (!archivos || !archivos.length) {
                    //  $imagenPrevisualizacion.src = "";
                    //return;
                    //}
                    // Ahora tomamos el primer archivo, el cual vamos a previsualizar
                    for (let i = 0; i < archivos.length; i++) {
                        const archivo = archivos[i];
                        // Lo convertimos a un objeto de tipo objectURL
                        let objectURL = URL.createObjectURL(archivo);
                        // Y a la fuente de la imagen le ponemos el objectURL
                        //$imagenPrevisualizacion.src = objectURL;
                        $("#contenedorImagenes").append(
                            "<div style='margin: 10px' class='col-3 d-flex justify-content-center border'> " +
                            " <button type='button' class=\"btn-close\"  id='imagenCierra" + i + "' aria-label='close'>  </button>" +
                            "<img id='imagenPrevisualizacion" + i + "' src='" + objectURL + "' width='100' height='100' alt=''> " +
                            "</div>");
                        contador = contador + 1;
                    }

                    for (let i = 0; i < contador; i++) {
                        $("body").on("click", ".btn-close", function () {
                            $("img").css('display', none);
                            contador = contador - 1;
                        })
                    }

                });

            });
        </script>



    </head>
    <body>


        <main>
            <div class="container">
                <h2> El juego de la memoria </h2>
                <h6 > Total de imágenes seleccionadas: </h6>
                <div class="" style="width: 600px">
                    <input multiple type="file" id="subirPersonaje" aria-label="Agregar imágenes" accept="image/png" name="imagenPersonaje" style="display: none;" required>
                    <button style="width: auto" class='btn btn-success'>
                        <label for="subirPersonaje" id="labelarchivo">Agregar imagenes</label>
                    </button>
                </div>
                <div id="contenedorImagenes" class="row" style="width: 80%">
                    <!-- La imagen que vamos a usar para previsualizar lo que el usuario selecciona -->
                    <!-- <img id="imagenPrevisualizacion">-->

                 </div>


                 <div id="cuadricula"> </div>

             </div>
         </main>



         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                 integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                 crossorigin="anonymous"></script>
     </body>
 </html>